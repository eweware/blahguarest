<?xml version="1.0" encoding="UTF-8"?>

<!--  MANAGER ORDER MATTERS! -->

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

	<import resource="applicationPropertiesLoader.xml" />

    <bean id="systemManager" class="main.java.com.eweware.service.mgr.SystemManager"
          init-method="start" destroy-method="shutdown">
        <constructor-arg value="${blag.crypto.on}" />
        <constructor-arg value="${blah.rest.service.endpoint}" />
        <constructor-arg value="${blag.memcached.hostname}" />
        <constructor-arg value="${blag.memcached.port}" />
        <constructor-arg value="${blag.dev.memcached.hostname}" />
        <constructor-arg value="${blag.dev.rest.port}" />
    </bean>

    <bean id="mongoStoreManager" class="main.java.com.eweware.service.base.store.impl.mongo.dao.MongoStoreManager"
    init-method="start" destroy-method="shutdown">

        <constructor-arg  type="java.lang.String" value="${blag.store.mongo.hostname}" />
        <constructor-arg  type="java.lang.String" value="${blag.dev.mongo.hostname}" />
        <constructor-arg  type="java.lang.String" value="${blag.store.mongo.port}" />
        <!--<constructor-arg  type="java.lang.String" value="${blag.store.mongo.mediaDBName}" />-->
        <constructor-arg  type="java.lang.String" value="${blag.store.mongo.userDBName}" />
        <constructor-arg  type="java.lang.String" value="${blag.store.mongo.blahDBName}" />
        <constructor-arg  type="java.lang.String" value="${blag.store.mongo.trackerDBName}" />
        <constructor-arg  type="java.lang.Integer" value="${blag.store.mongo.connectionsPerHost}" />
        <property name="badgeAuthorityCollectionName" value="${blah.store.mongo.userdb.collection.badgeauthorities}"/>
        <property name="badgeTransactionCollectionName" value="${blah.store.mongo.userdb.collection.badgetransaction}"/>
        <property name="badgeCollectionName" value="${blah.store.mongo.userdb.collection.badges}"/>
        <property name="trackUserCollectionName" value="${blag.store.mongo.trackerdb.collection.trackuser}"/>
        <property name="trackBlahCollectionName" value="${blag.store.mongo.trackerdb.collection.trackblah}"/>
        <property name="trackCommentCollectionName" value="${blag.store.mongo.trackerdb.collection.trackcomment}"/>
        <property name="trackerCollectionName" value="${blag.store.mongo.trackerdb.collection.tracker}"/>
        <property name="userCollectionName" value="${blag.store.mongo.userdb.collection.users}"/>
        <property name="userAccountsCollectionName" value="${blag.store.mongo.userdb.collection.user.accounts}"/>
        <property name="userProfileCollectionName" value="${blag.store.mongo.userdb.collection.userProfiles}"/>
        <property name="groupCollectionName" value="${blag.store.mongo.userdb.collection.groups}"/>
        <property name="groupTypeCollectionName" value="${blag.store.mongo.userdb.collection.groupTypes}"/>
        <property name="userGroupCollectionName" value="${blag.store.mongo.userdb.collection.usergroups}"/>
        <property name="mediaCollectionName" value="${blag.store.mongo.blahdb.collection.media}"/>
        <property name="blahCollectionName" value="${blag.store.mongo.blahdb.collection.blahs}"/>
        <property name="blahTypeCollectionName" value="${blag.store.mongo.blahdb.collection.blahTypes}"/>
        <property name="commentCollectionName" value="${blag.store.mongo.blahdb.collection.comments}"/>
        <property name="userBlahInfoCollectionName" value="${blag.store.mongo.userdb.collection.userBlahInfo}"/>
        <property name="userCommentInfoCollectionName" value="${blag.store.mongo.userdb.collection.userCommentInfo}"/>
        <property name="inboxStateCollectionName" value="${blag.store.mongo.blahdb.collection.inboxstate}"/>
        <property name="blahInboxCollectionName" value="${blag.store.mongo.blahdb.collection.blahInbox}"/>
        <property name="demographicsCollectionName" value="${blag.store.mongo.userdb.collection.demographics}"/>
    </bean>

    <bean id="badgesManager" class="main.java.com.eweware.service.mgr.BadgesManager"
          init-method="start" destroy-method="shutdown" />

    <!-- MAINTAIN BEAN ORDER -->
    <bean id="mailManager" class="main.java.com.eweware.service.mgr.MailManager"
          init-method="start" destroy-method="shutdown">
        <constructor-arg value="${blag.mail.smtp.do.not.use}" />
        <constructor-arg value="${blag.mail.smtp.auth}" />
        <constructor-arg value="${blag.mail.smtp.starttls.enable}" />
        <constructor-arg value="${blag.mail.smtp.host}" />
        <constructor-arg value="${blag.mail.smtp.port}" />
        <constructor-arg value="${blag.mail.smtp.account}" />
        <constructor-arg value="${blag.mail.smtp.password}" />
        <constructor-arg value="${blag.mail.smtp.replyto.address}" />
    </bean>

    <bean id="groupManager" class="main.java.com.eweware.service.mgr.GroupManager"
		init-method="start" destroy-method="shutdown">
        <constructor-arg type="java.lang.Integer" value="${blag.maximum.returned.object.limit}" />
    </bean>

    <bean id="userManager" class="main.java.com.eweware.service.mgr.UserManager"
		init-method="start" destroy-method="shutdown">
        <constructor-arg type="java.lang.Boolean" value="${blag.debug}" />
        <constructor-arg type="java.lang.Boolean" value="${blag.index.doIndex}" />
        <constructor-arg value="${blag.user.index.dir}" />
        <constructor-arg value="${blag.user.index.event.count.before.flush}" />
        <constructor-arg value="${blag.user.index.time.in.ms.before.flush}" />
        <constructor-arg type="java.lang.Integer" value="${blag.maximum.returned.object.limit}" />
    </bean>

    <bean id="trackingManager" class="main.java.com.eweware.service.mgr.TrackingManager"
          init-method="start" destroy-method="shutdown">
    </bean>

    <bean id="blahManager" class="main.java.com.eweware.service.mgr.BlahManager"
		init-method="start" destroy-method="shutdown">
        <constructor-arg type="java.lang.Boolean" value="${blag.debug}" />
        <constructor-arg type="java.lang.Boolean" value="${blag.index.doIndex}" />
        <constructor-arg value="${blag.blah.index.dir}" />
        <constructor-arg value="${blag.blah.comment.index.dir}" />
        <constructor-arg value="${blag.blah.index.event.count.before.flush}" />
        <constructor-arg value="${blag.blah.index.time.in.ms.before.flush}" />
        <constructor-arg value="${blag.blah.max.opens.or.views.per.update}" />
        <constructor-arg type="java.lang.Integer" value="${blag.maximum.returned.object.limit}" />
    </bean>

    <bean id="statisticsManager" class="main.java.com.eweware.service.mgr.StatisticsManager"
          init-method="start" destroy-method="shutdown" />

    <bean id="mediaManager" class="main.java.com.eweware.service.mgr.MediaManager"
		init-method="start" destroy-method="shutdown">
        <constructor-arg  type="java.lang.String" value="${blag.media.images.s3pathname}" />
        <constructor-arg  type="java.lang.String" value="${blag.media.images.bucket.name}" />
        <constructor-arg  type="java.lang.String" value="${blag.media.images.bucket.image.dirpath}" />
        <constructor-arg  type="java.lang.String" value="${blag.media.images.bucket.original.dirpath}" />
	</bean>

 	<bean id="testManager" class="main.java.com.eweware.service.mgr.TestManager"
 		init-method="start" destroy-method="shutdown"> 
 	</bean> 
</beans>
